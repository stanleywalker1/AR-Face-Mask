{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FaceAnchorGroup = void 0;\n\nconst three_1 = require(\"../three\");\n\nconst camera_1 = require(\"../camera\");\n/**\n * A THREE.Group which attaches content to a face as it moves around in the camera view.\n * @see https://docs.zap.works/universal-ar/web-libraries/threejs/face-tracking/\n */\n\n\nclass FaceAnchorGroup extends three_1.THREE.Group {\n  /**\n   * Constructs a new FaceAnchorGroup.\n   * @param camera - A ZapparThree.Camera.\n   * @param faceTracker - The face tracker which will be used.\n   * @param anchorId - Specify this to limit the group to tracking an anchor with the provided ID.\n   */\n  constructor(camera, faceTracker, anchorId) {\n    super();\n    this.camera = camera;\n    this.faceTracker = faceTracker;\n    this.anchorId = anchorId;\n    /**\n     * @ignore\n     */\n\n    this.isReady = false; // We'll be updating this Group's matrix ourselves from the Zappar library\n\n    this.matrixAutoUpdate = false;\n  }\n\n  updateMatrixWorld(force) {\n    if (!this.currentAnchor || !this.faceTracker.visible.has(this.currentAnchor)) {\n      // No current anchor, or current anchor isn't visible\n      if (this.anchorId) {\n        this.currentAnchor = this.faceTracker.anchors.get(this.anchorId);\n      } else {\n        this.currentAnchor = this.faceTracker.visible.values().next().value;\n      }\n    }\n\n    if (this.currentAnchor) {\n      this.matrix.fromArray(this.currentAnchor.pose(this.camera.rawPose, this.camera.currentMirrorMode === camera_1.CameraMirrorMode.Poses));\n      this.matrix.decompose(this.position, this.quaternion, this.scale);\n    }\n\n    super.updateMatrixWorld(force);\n  }\n\n}\n\nexports.FaceAnchorGroup = FaceAnchorGroup;","map":{"version":3,"sources":["/Users/StanleyWalker/Desktop/face-mask-demo/AR-Face-Mask/node_modules/@zappar/zappar-threejs/lib/trackers/faceanchorgroup.js"],"names":["Object","defineProperty","exports","value","FaceAnchorGroup","three_1","require","camera_1","THREE","Group","constructor","camera","faceTracker","anchorId","isReady","matrixAutoUpdate","updateMatrixWorld","force","currentAnchor","visible","has","anchors","get","values","next","matrix","fromArray","pose","rawPose","currentMirrorMode","CameraMirrorMode","Poses","decompose","position","quaternion","scale"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,eAAR,GAA0B,KAAK,CAA/B;;AACA,MAAMC,OAAO,GAAGC,OAAO,CAAC,UAAD,CAAvB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,WAAD,CAAxB;AACA;AACA;AACA;AACA;;;AACA,MAAMF,eAAN,SAA8BC,OAAO,CAACG,KAAR,CAAcC,KAA5C,CAAkD;AAC9C;AACJ;AACA;AACA;AACA;AACA;AACIC,EAAAA,WAAW,CAACC,MAAD,EAASC,WAAT,EAAsBC,QAAtB,EAAgC;AACvC;AACA,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA;AACR;AACA;;AACQ,SAAKC,OAAL,GAAe,KAAf,CARuC,CASvC;;AACA,SAAKC,gBAAL,GAAwB,KAAxB;AACH;;AACDC,EAAAA,iBAAiB,CAACC,KAAD,EAAQ;AACrB,QAAI,CAAC,KAAKC,aAAN,IAAuB,CAAC,KAAKN,WAAL,CAAiBO,OAAjB,CAAyBC,GAAzB,CAA6B,KAAKF,aAAlC,CAA5B,EAA8E;AAC1E;AACA,UAAI,KAAKL,QAAT,EAAmB;AACf,aAAKK,aAAL,GAAqB,KAAKN,WAAL,CAAiBS,OAAjB,CAAyBC,GAAzB,CAA6B,KAAKT,QAAlC,CAArB;AACH,OAFD,MAGK;AACD,aAAKK,aAAL,GAAqB,KAAKN,WAAL,CAAiBO,OAAjB,CAAyBI,MAAzB,GAAkCC,IAAlC,GAAyCrB,KAA9D;AACH;AACJ;;AACD,QAAI,KAAKe,aAAT,EAAwB;AACpB,WAAKO,MAAL,CAAYC,SAAZ,CAAsB,KAAKR,aAAL,CAAmBS,IAAnB,CAAwB,KAAKhB,MAAL,CAAYiB,OAApC,EAA6C,KAAKjB,MAAL,CAAYkB,iBAAZ,KAAkCtB,QAAQ,CAACuB,gBAAT,CAA0BC,KAAzG,CAAtB;AACA,WAAKN,MAAL,CAAYO,SAAZ,CAAsB,KAAKC,QAA3B,EAAqC,KAAKC,UAA1C,EAAsD,KAAKC,KAA3D;AACH;;AACD,UAAMnB,iBAAN,CAAwBC,KAAxB;AACH;;AAlC6C;;AAoClDf,OAAO,CAACE,eAAR,GAA0BA,eAA1B","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FaceAnchorGroup = void 0;\nconst three_1 = require(\"../three\");\nconst camera_1 = require(\"../camera\");\n/**\n * A THREE.Group which attaches content to a face as it moves around in the camera view.\n * @see https://docs.zap.works/universal-ar/web-libraries/threejs/face-tracking/\n */\nclass FaceAnchorGroup extends three_1.THREE.Group {\n    /**\n     * Constructs a new FaceAnchorGroup.\n     * @param camera - A ZapparThree.Camera.\n     * @param faceTracker - The face tracker which will be used.\n     * @param anchorId - Specify this to limit the group to tracking an anchor with the provided ID.\n     */\n    constructor(camera, faceTracker, anchorId) {\n        super();\n        this.camera = camera;\n        this.faceTracker = faceTracker;\n        this.anchorId = anchorId;\n        /**\n         * @ignore\n         */\n        this.isReady = false;\n        // We'll be updating this Group's matrix ourselves from the Zappar library\n        this.matrixAutoUpdate = false;\n    }\n    updateMatrixWorld(force) {\n        if (!this.currentAnchor || !this.faceTracker.visible.has(this.currentAnchor)) {\n            // No current anchor, or current anchor isn't visible\n            if (this.anchorId) {\n                this.currentAnchor = this.faceTracker.anchors.get(this.anchorId);\n            }\n            else {\n                this.currentAnchor = this.faceTracker.visible.values().next().value;\n            }\n        }\n        if (this.currentAnchor) {\n            this.matrix.fromArray(this.currentAnchor.pose(this.camera.rawPose, this.camera.currentMirrorMode === camera_1.CameraMirrorMode.Poses));\n            this.matrix.decompose(this.position, this.quaternion, this.scale);\n        }\n        super.updateMatrixWorld(force);\n    }\n}\nexports.FaceAnchorGroup = FaceAnchorGroup;\n"]},"metadata":{},"sourceType":"script"}